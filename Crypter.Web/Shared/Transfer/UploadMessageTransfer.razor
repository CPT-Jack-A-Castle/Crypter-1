@inherits UploadMessageTransferBase

<div class="message-upload" hidden="@EncryptionInProgress">
   <div class="row">
      <div class="col-12 p-0 my-3">
         <input type="text" class="form-control" @bind="MessageSubject" @bind:event="oninput" id="messageSubject" name="messageSubject" placeholder="Subject">
      </div>
      <div class="col-12 p-0">
         <textarea class="form-control" @bind="MessageText" @bind:event="oninput" id="messageText" name="messageText" rows="5" cols="57" placeholder="Type your message here..." maxlength="@MaxMessageLength"></textarea>
         <label><small class="align-text-bottom">@(MaxMessageLength - MessageText.Count()) remaining</small></label>
      </div>
   </div>
   <div class="row">
      @if (Error)
      {
         <div class="validation-errors my-3">
            <div class="alert alert-danger" role="alert">
               @ErrorMessage
            </div>
         </div>
      }
   </div>
   <div class="row">
      <div class="col-12 p-0">
         <button type="button" class="btn btn-primary mx-auto d-block" @onclick="@(e => OnEncryptClicked())">Encrypt</button>
      </div>
   </div>
   <TransferSuccessModal @ref="ModalForAnonymousRecipient" UploadType="message" ItemId="@TransferId" RecipientX25519PrivateKey="@EncodedRecipientX25519PrivateKey" ModalClosedCallback="@UploadCompletedEvent" />
   <BasicModal @ref="ModalForUserRecipient" Subject="Upload Successful" Message=@UploadSuccessForUserMessage PrimaryButtonText="Okay" ModalClosedCallback="@UploadCompletedEvent" />
</div>

<div class="encrypt-status text-center" hidden="@(!EncryptionInProgress)">
   <h3>@EncryptionStatusMessage</h3>
   <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
   </div>
</div>
